- hosts: all
  vars_files:
    - httpd_vars.yml
  tasks:
    - file:
        state: directory
        path: "{{ dvd_dir }}"

    - mount:
        src: "/dev/cdrom"
        path: "{{ dvd_dir }}"
        state: mounted
        fstype: iso9660

    - yum_repository:
        baseurl: "{{ dvd_dir }}/AppStream"
        name: "dvd1"
        description: "AppStream dvd"
        gpgcheck: no

    - yum_repository:
        baseurl: "{{ dvd_dir }}/BaseOS"
        name: "dvd2"
        description: "BaseOS dvd"
        gpgcheck: no

    - package:
        name: "httpd"
        state: present

    - file:
        state: directory
        path: "{{ document_root }}"

    - template:
        dest: "/etc/httpd/conf.d/apache.conf"
        src: "apache.conf"

    - copy:
        dest: "{{ document_root }}/index.html"
        content: "Welcome to ne my page location!!"

    - service:
        name: "httpd"
        state: restarted
        enabled: yes

    - firewalld:
        port: "{{ port_num }}/tcp"
        state: enabled
        permanent: yes
        immediate: yes






